/*

https://www.codechef.com/SNCK1A19/problems/TYPING
*/
#include <bits/stdc++.h>
using namespace std;
#define int long long int
#define pb push_back
#define mp make_pair
#define F first
#define S second
const int N=200008;
#define M 1000000007
#define double long double
#define BINF 1000000000000000001
#define init(arr,val) memset(arr,val,sizeof(arr))
#define MAXN 1000001
using namespace std;


#undef int
int main()
{
#define int long long int

    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    cout.tie(NULL);

    map<string,int>m;

    int t;
    cin>>t;
    while(t--)
    {
    	int n;
    	map<string,int>m;
    	cin>>n;
    	string s[n];string r[n];
    	for(int i=0;i<n;i++)
    	{
    		cin>>s[i];
    		for(int j=0;j<s[i].length();j++)
    		{
    			if(s[i][j]=='d' || s[i][j]=='f')
    				r[i]+='0';
    			else r[i]+='1';
    		}

    	}

    	int ans=0;
    	for(int i=0;i<n;i++)
    	{
    		int oo=0;

    		int k=0;
    		
    		//cout<<r[i].length()<<endl;
    		oo+=2;
    		for(int j=1;j<r[i].length();j++)
    		{
    			if(r[i][j]==r[i][j-1]) oo+=4;
    			else oo+=2;
    		}
    		if(m[s[i]]) oo/=2;

    		ans+=oo;
    		
    		//cout<<oo<<endl;

    		m[s[i]]=true;
    	}

    	cout<<ans<<endl;
    }
    


return 0;
}
